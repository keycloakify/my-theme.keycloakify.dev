(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(n){if(n.ep)return;n.ep=!0;const t=o(n);fetch(n.href,t)}})();const j="modulepreload",k=function(r){return"/"+r},v={},$=function(e,o,i){let n=Promise.resolve();if(o&&o.length>0){let m=function(l){return Promise.all(l.map(a=>Promise.resolve(a).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),d=s?.nonce||s?.getAttribute("nonce");n=m(o.map(l=>{if(l=k(l),l in v)return;v[l]=!0;const a=l.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":j,a||(u.as="script"),u.crossOrigin="",u.href=l,d&&u.setAttribute("nonce",d),document.head.appendChild(u),a)return new Promise((p,h)=>{u.addEventListener("load",p),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function t(s){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=s,window.dispatchEvent(d),!d.defaultPrevented)throw s}return n.then(s=>{for(const d of s||[])d.status==="rejected"&&t(d.reason);return e().catch(t)})};class N extends Error{constructor(e){super(`Wrong assert${e?`: "${e}"`:""}`),this.originalMessage=e,Object.setPrototypeOf(this,new.target.prototype),this.stack}}let g;function f(r,e){if(arguments.length===0&&(r=!0),g){g=void 0;return}if(!r){const o=new N(typeof e=="function"?e():e);throw Error.captureStackTrace&&Error.captureStackTrace(o,f),o}}const _="'is' error";function J(r){const e={};if(g)throw g=void 0,new Error(_);return g=e,Promise.resolve().then(()=>{if(g===e)throw new Error(_)}),null}function V(r,e){return e}function L(r){const{length:e}=r,o=Math.ceil(e*3/4),i=window.crypto||window.msCrypto,n=new Uint8Array(o);i.getRandomValues(n);let t=btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return t.length>e?t.substring(0,e):t.length<e?t+L({length:e-t.length}):t}const b="b2lkYy1zcGEu",O=32-b.length;function X(){return`${b}${L({length:O})}`}function A(r){const{maybeStateUrlParamValue:e}=r;return e.startsWith(b)&&e.length===b.length+O}const C="oidc.";function U(r){const{stateUrlParamValue:e}=r;return`${C}${e}`}function T(r){const{stateUrlParamValue:e}=r,o=localStorage.getItem(U({stateUrlParamValue:e}));if(o===null)return;const i=JSON.parse(o);return f(V(i,i instanceof Object&&i.data instanceof Object&&typeof i.data.context=="string")),i}function Y(r){const{stateUrlParamValue:e}=r;localStorage.removeItem(U({stateUrlParamValue:e}))}function F(r){const{stateUrlParamValue:e}=r,o=T({stateUrlParamValue:e});if(o!==void 0)return o.data}let I;function K(){return I}function D(r){I=r.BASE_URL}let E;const z=new Promise(r=>E=r);function B(r){const{shouldLoadApp:e}=r;f(E!==void 0),E(e)}const q=typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class x{constructor(){let e,o,i;this.pr=new Promise((n,t)=>{e=s=>{i=[s],n(s)},o=s=>{t(s)}}),this.resolve=e,this.reject=o,this.getState=()=>i===void 0?{hasResolved:!1}:{hasResolved:!0,value:i[0]}}}function M(){const r=[];let e=0;const o={subscribe:i=>{r.push(i);let n=!0;return{unsubscribe:()=>{if(!n)return;n=!1;const t=r.indexOf(i);t>=0&&r.splice(t,1)}}},waitFor:()=>{const i=new x,{unsubscribe:n}=o.subscribe(t=>{n(),i.resolve(t)});return i.pr},post:i=>{e++;const n=r.slice();for(const t of n)try{t(i)}catch{}},get postCount(){return e}};return o}let S=!1;const P="oidc-spa:cross-window-messaging:";function W(r){if(S)throw new Error("oidc-spa: oidcEarlyInit() Should be called only once");if(S=!0,!q)return{shouldLoadApp:!0};const{safeMode:e=!1,isPostLoginRedirectManual:o=!1,BASE_URL:i}=r,{shouldLoadApp:n}=G({isPostLoginRedirectManual:o});if(n){const t=a=>new Error([`oidc-spa: Monkey patching of ${a} has been blocked for security reasons.`,"You can disable this restriction by setting `safeMode: false` in `oidcEarlyInit()`","or in your Vite plugin configuration,","but please note this will reduce security.","If you believe this restriction is too strict, please open an issue at:","https://github.com/keycloakify/oidc-spa","We're still identifying real-world blockers and can safely add exceptions where needed.","For now, we prefer to err on the side of hardening rather than exposure."].join(" "));for(const a of["fetch","XMLHttpRequest","WebSocket","String","Object","Promise","Array","RegExp","TextEncoder","Uint8Array","Uint32Array","Response","Reflect","JSON","encodeURIComponent","decodeURIComponent","atob","btoa"]){if(!e)continue;const u=window[a];if("prototype"in u)for(const p of Object.getOwnPropertyNames(u.prototype)){if(a==="Object"&&(p==="toString"||p==="constructor"||p==="valueOf")||a==="Array"&&(p==="constructor"||p==="concat"))continue;const h=Object.getOwnPropertyDescriptor(u.prototype,p);f(h!==void 0),h.configurable&&Object.defineProperty(u.prototype,p,{enumerable:h.enumerable,configurable:!1,..."value"in h?{get:()=>h.value,set:()=>{throw t(`window.${a}.prototype.${p}`)}}:{get:h.get,set:h.set??(()=>{throw t(`window.${a}.prototype.${p}`)})}})}Object.freeze(u),Object.defineProperty(window,a,{configurable:!1,enumerable:!0,get:()=>u,set:()=>{throw t(`window.${a}`)}})}if(e)for(const a of["call","apply","bind"]){const c=Function.prototype[a];Object.defineProperty(Function.prototype,a,{configurable:!1,enumerable:!0,get:()=>c,set:()=>{throw t(`window.Function.prototype.${a});`)}})}const s=(()=>{const a=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"data");f(a!==void 0);const{get:c}=a;return f(c!==void 0),c})(),d=(()=>{const a=Object.getOwnPropertyDescriptor(MessageEvent.prototype,"origin");f(a!==void 0);const{get:c}=a;return f(c!==void 0),c})(),m=Event.prototype.stopImmediatePropagation,l=window.location.origin;window.addEventListener("message",a=>{if(d.call(a)!==l)return;const c=s.call(a);if(typeof c!="string"||!c.startsWith(P))return;m.call(a);const u=JSON.parse(c.slice(P.length));(R??(R=M())).post(u)},{capture:!0,once:!1,passive:!1}),i!==void 0&&D({BASE_URL:i})}return B({shouldLoadApp:n}),{shouldLoadApp:n}}let R;function Q(){return R??(R=M())}let w;function Z(){return f(S,"34933395"),w===void 0?{authResponse:void 0}:{authResponse:w,clearAuthResponse:()=>{w=void 0}}}let y;function ee(){return f(y!==void 0,"033292"),y}function G(r){const{isPostLoginRedirectManual:e}=r,o=new URL(window.location.href),i=(()=>{e:{const s=new URLSearchParams(o.hash.replace(/^#/,"")).get("state");if(s===null||!A({maybeStateUrlParamValue:s}))break e;return{hasAuthResponseInUrl:!0,responseMode:"fragment"}}e:{const s=o.searchParams.get("state");if(s===null||!A({maybeStateUrlParamValue:s})||o.searchParams.get("client_id")!==null&&o.searchParams.get("response_type")!==null&&o.searchParams.get("redirect_uri")!==null)break e;return{hasAuthResponseInUrl:!0,responseMode:"query"}}return{hasAuthResponseInUrl:!1}})();if(!i.hasAuthResponseInUrl)return y=o.href.slice(o.origin.length),{shouldLoadApp:!0};y=o.pathname;const{authResponse:n}=(()=>{const s={state:""},d=(()=>{switch(i.responseMode){case"fragment":return new URLSearchParams(o.hash.replace(/^#/,""));case"query":return o.searchParams;default:f(!1)}})();for(const[m,l]of d)s[m]=l;return f(s.state!=="","063965"),{authResponse:s}})(),t=F({stateUrlParamValue:n.state});if(t===void 0)return history.replaceState({},"",y),{shouldLoadApp:!0};switch(t.context){case"iframe":if(parent!==top){const s=["oidc-spa: For security reasons, refusing to post the auth response.","If you want your app to be framable use sessionRestorationMethod: 'full page redirect'."].join(" ");throw alert(s),new Error(s)}return parent.postMessage(`${P}${JSON.stringify(n)}`,location.origin),{shouldLoadApp:!1};case"redirect":{w=n;const s=t.action==="login"&&n.error==="consent_required"?t.rootRelativeRedirectUrl_consentRequiredCase:t.rootRelativeRedirectUrl;return e?history.replaceState({},"",y):history.replaceState({},"",s),{shouldLoadApp:!0}}default:f(!1)}}const{shouldLoadApp:H}=W({safeMode:!0,isPostLoginRedirectManual:!1,BASE_URL:"/"});H&&$(()=>import("./main-DiiZGx-8.js").then(r=>r.m),[]);export{x as D,C as S,$ as _,f as a,J as b,M as c,F as d,Y as e,K as f,Q as g,X as h,q as i,Z as j,ee as k,z as p,V as t};
